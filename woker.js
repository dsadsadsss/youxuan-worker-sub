//设置变量SUB,节点名称设为Country-名称，优选ip设置为ip.sb,会自动替换国家和优选
//订阅链接简单格式:域名/token=值?cf_port=值
//完整格式: 域名/token=值?cf_port=值&url=API地址&sub=节点链接
//参数说明：
//  - url: 自定义优选IP的API地址，多个用分号(;)隔开
//  - sub: 自定义节点链接，多个用分号(;)隔开
//以下是我找到的优选ip的api地址，你也可以搭建自己的api
//https://api.uouin.com/cloudflare.html
//https://vps789.com/openApi/cfIpTop20
//https://raw.githubusercontent.com/ymyuuu/IPDB/refs/heads/main/bestproxy.txt
//https://raw.githubusercontent.com/ymyuuu/IPDB/refs/heads/main/bestcf.txt
//https://ip.164746.xyz/ipTop10.html
//https://raw.githubusercontent.com/ZhiXuanWang/cf-speed-dns/refs/heads/main/ipTop10.html
//https://vps789.com/public/sum/cfIpApi
//https://www.wetest.vip/api/cf2dns/get_cloudflare_ip&type=v4&key=o1zrmHAF
//https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesapi.txt
//https://addressesapi.090227.xyz/CloudFlareYes
//https://addressesapi.090227.xyz/ip.164746.xyz
//https://ipdb.api.030101.xyz/?type=bestproxy&country=true
//ts.hpc.tw,proxyip.fxxk.dedyn.io
const CONFIG = {
    TOKEN: '111',  //订阅链接密钥
    API: 'https://vps789.com/public/sum/cfIpApi',  //优选ip的api,多个用;隔开
    SUB: '',  //自定义链接,多个用;隔开
    CFIPS: 'ip.sb;bestcf.030101.xyz;cf.090227.xyz' ,//优选域名,多个用;隔开
    COUNTRY_REPLACE: 'YM' // 优选域名节点国家的拼音简称
};

//排除包含关键词的节点
const excludeKeywords = 'GB-eu.com;TW-free.tw';

const _0x4a89ab=_0x3afe;(function(_0x59d781,_0x4d5d29){const _0x4ed952=_0x3afe,_0x45859c=_0x59d781();while(!![]){try{const _0x260abf=parseInt(_0x4ed952(0x160))/0x1+parseInt(_0x4ed952(0x1b4))/0x2+parseInt(_0x4ed952(0x158))/0x3+parseInt(_0x4ed952(0x142))/0x4+-parseInt(_0x4ed952(0x170))/0x5+-parseInt(_0x4ed952(0x1d2))/0x6+parseInt(_0x4ed952(0x1bc))/0x7*(-parseInt(_0x4ed952(0x148))/0x8);if(_0x260abf===_0x4d5d29)break;else _0x45859c['push'](_0x45859c['shift']());}catch(_0x37d033){_0x45859c['push'](_0x45859c['shift']());}}}(_0x10af,0x69420));const countryMapping={'CN':'中国','HK':'香港','TW':'台湾','JP':'日本','KR':'韩国','SG':_0x4a89ab(0x1c8),'MY':'马来','TH':'泰国','VN':'越南','ID':'印尼','IN':'印度','PH':_0x4a89ab(0x1bb),'BN':'文莱','MO':'澳门','KH':_0x4a89ab(0x1cd),'LA':'老挝','MM':'缅甸','NP':_0x4a89ab(0x1a1),'PK':_0x4a89ab(0x17e),'BD':'孟加拉','LK':'斯里兰卡','MV':_0x4a89ab(0x16c),'AE':_0x4a89ab(0x19d),'IL':_0x4a89ab(0x14b),'TR':'土耳其','IQ':_0x4a89ab(0x1db),'IR':'伊朗','SA':'沙特','QA':_0x4a89ab(0x1b8),'JO':'约旦','LB':_0x4a89ab(0x197),'OM':'阿曼','BH':'巴林','KW':'科威特','KZ':_0x4a89ab(0x154),'UZ':_0x4a89ab(0x169),'MN':'蒙古','US':'美国','CA':_0x4a89ab(0x1b5),'MX':_0x4a89ab(0x1b3),'PR':_0x4a89ab(0x13d),'CU':'古巴','PA':_0x4a89ab(0x172),'CR':_0x4a89ab(0x14d),'GT':_0x4a89ab(0x134),'SV':_0x4a89ab(0x135),'HN':_0x4a89ab(0x1a9),'NI':_0x4a89ab(0x174),'JM':_0x4a89ab(0x16d),'DO':_0x4a89ab(0x164),'BS':_0x4a89ab(0x16b),'BZ':_0x4a89ab(0x16e),'HT':'海地','BR':'巴西','AR':_0x4a89ab(0x19a),'CL':'智利','CO':_0x4a89ab(0x13f),'PE':'秘鲁','VE':_0x4a89ab(0x1a7),'EC':_0x4a89ab(0x165),'BO':_0x4a89ab(0x15f),'PY':_0x4a89ab(0x14c),'UY':_0x4a89ab(0x162),'GY':'圭亚那','SR':_0x4a89ab(0x184),'DE':'德国','GB':'英国','FR':'法国','IT':_0x4a89ab(0x1a6),'ES':_0x4a89ab(0x141),'PT':_0x4a89ab(0x193),'CH':'瑞士','AT':'奥地利','NL':'荷兰','BE':'比利时','LU':_0x4a89ab(0x159),'SE':'瑞典','NO':'挪威','DK':'丹麦','FI':'芬兰','IE':_0x4a89ab(0x136),'IS':'冰岛','GR':'希腊','RU':_0x4a89ab(0x199),'UA':_0x4a89ab(0x17b),'PL':'波兰','CZ':'捷克','HU':'匈牙利','RO':_0x4a89ab(0x14e),'BG':_0x4a89ab(0x1dd),'HR':_0x4a89ab(0x1d8),'RS':_0x4a89ab(0x1ad),'SI':_0x4a89ab(0x1d5),'SK':_0x4a89ab(0x13e),'MD':'摩尔多瓦','BY':_0x4a89ab(0x190),'AL':_0x4a89ab(0x18a),'BA':'波黑','EE':_0x4a89ab(0x15b),'LV':_0x4a89ab(0x1b9),'LT':_0x4a89ab(0x1b6),'MK':_0x4a89ab(0x155),'ME':'黑山','CY':_0x4a89ab(0x171),'MT':_0x4a89ab(0x131),'AU':_0x4a89ab(0x1c5),'NZ':_0x4a89ab(0x1d1),'FJ':'斐济','PG':'巴布亚新几内亚','SB':_0x4a89ab(0x161),'VU':_0x4a89ab(0x153),'ZA':'南非','EG':'埃及','MA':_0x4a89ab(0x175),'NG':_0x4a89ab(0x151),'KE':'肯尼亚','GH':'加纳','DZ':_0x4a89ab(0x15e),'TN':_0x4a89ab(0x1c1),'ET':_0x4a89ab(0x1ce),'TZ':_0x4a89ab(0x1ba),'UG':_0x4a89ab(0x1c0),'SN':_0x4a89ab(0x19b),'CG':'刚果','CI':_0x4a89ab(0x1ca),'CM':_0x4a89ab(0x150),'ZW':_0x4a89ab(0x1da),'SD':'苏丹','LY':_0x4a89ab(0x12f),'AO':_0x4a89ab(0x12b),'MU':'毛里求斯','MG':_0x4a89ab(0x167),'SC':_0x4a89ab(0x1ae),'NA':_0x4a89ab(0x182),'BW':'博茨瓦纳','MW':_0x4a89ab(0x181),'RW':_0x4a89ab(0x1be),'SS':_0x4a89ab(0x198),'ZM':_0x4a89ab(0x15d),'VA':_0x4a89ab(0x1d9),'AQ':'南极','GL':'格陵兰','IM':'马恩岛','JE':_0x4a89ab(0x133),'MC':_0x4a89ab(0x16f),'SM':_0x4a89ab(0x1bf),'LI':_0x4a89ab(0x17d),'AD':_0x4a89ab(0x13b),'GI':'直布罗陀','YM':_0x4a89ab(0x1c9)},PROTOCOL={'xieyi':'vl','xieyi2':'ess','pm':'vm'};function _0x10af(){const _0x4a3d65=['卡塔尔','拉脱维亚','坦桑尼亚','菲律宾','658YrJXZe','test','卢旺达','圣马力诺','乌干达','突尼斯','8080','includes','let\x20','澳大利亚','findIndex','COUNTRY_REPLACE','新加坡','优选域名','科特迪瓦','Country','Hello\x20World','柬埔寨','埃塞俄比亚','log','some','新西兰','1369254JqHyty','Fetching\x20data\x20from:\x20','Using\x20API\x20URLs\x20from\x20CONFIG:','斯洛文尼亚','cfips','string','克罗地亚','梵蒂冈','津巴布韦','伊拉克','has','保加利亚','hasOwnProperty','安哥拉','xieyi','https://','hasCountryInfo','利比亚','push','马耳他','No\x20valid\x20IP\x20data\x20found','泽西岛','危地马拉','萨尔瓦多','爱尔兰','Error\x20fetching\x20or\x20processing\x20data','Using\x20API\x20URLs\x20from\x20url\x20parameter:','exec','pathname','安道尔','ess://','波多黎各','斯洛伐克','哥伦比亚','charAt','西班牙','3158992Erqhoy','replace','var\x20','Missing\x20cf_port','Error\x20fetching\x20country\x20for\x20IP\x20','match','3496YQwSwh','/json','isArray','以色列','巴拉圭','哥斯达黎加','罗马尼亚','encode','喀麦隆','尼日利亚','unknown','瓦努阿图','哈萨克斯坦','北马其顿','SUB','TOKEN','343437OmzKsZ','卢森堡','http://','爱沙尼亚','join','赞比亚','阿尔及利亚','玻利维亚','256997oivJbe','所罗门群岛','乌拉圭','Error\x20parsing\x20JSON','多米尼加','厄瓜多尔','cf_port','马达加斯加','Total\x20unique\x20IPs\x20processed:\x20','乌兹别克斯坦','warn','巴哈马','马尔代夫','牙买加','伯利兹','摩纳哥','3310785YSZUKu','塞浦路斯','巴拿马','trimStart','尼加拉瓜','摩洛哥','https://ipinfo.io/','Using\x20SUB\x20URLs\x20from\x20url\x20parameter:','json','=none','/token=','乌克兰','forEach','列支敦士登','巴基斯坦','get','sub','马拉维','纳米比亚','status','苏里南','startsWith','url','searchParams','country','add','阿尔巴尼亚','parse','<script','Using\x20SUB\x20URLs\x20from\x20environment\x20variable:','处理订阅链接失败:','://','白俄罗斯','split','function\x20','葡萄牙','length','text/plain','API','黎巴嫩','南苏丹','俄罗斯','阿根廷','塞内加尔','trim','阿联酋','{BASS}://','const\x20','error','尼泊尔','application/json','filter','text','headers','意大利','委内瑞拉','No\x20valid\x20IP\x20data\x20found\x20from\x20any\x20API\x20endpoints','洪都拉斯','object','No\x20API\x20endpoints\x20provided','originalCountry','塞尔维亚','塞舌尔','map','http','Error\x20processing\x20IP\x20data','toLowerCase','墨西哥','402712cmQfVA','加拿大','立陶宛','Not\x20Found'];_0x10af=function(){return _0x4a3d65;};return _0x10af();}function isValidIP(_0x51f843){const _0x46b400=_0x4a89ab,_0x27d1a2=_0x51f843['split']('.');if(_0x27d1a2['length']!==0x4)return![];for(const _0x2fb916 of _0x27d1a2){const _0x31a15a=parseInt(_0x2fb916,0xa);if(isNaN(_0x31a15a)||_0x31a15a<0x0||_0x31a15a>0xff)return![];if(_0x2fb916[_0x46b400(0x194)]>0x1&&_0x2fb916[0x0]==='0')return![];}return!![];}function _0x3afe(_0x1967b5,_0x23a2da){const _0x10af04=_0x10af();return _0x3afe=function(_0x3afe34,_0x226b0e){_0x3afe34=_0x3afe34-0x12b;let _0x214040=_0x10af04[_0x3afe34];return _0x214040;},_0x3afe(_0x1967b5,_0x23a2da);}function isValidPort(_0x32d620){const _0x3ac1a4=parseInt(_0x32d620,0xa);return!isNaN(_0x3ac1a4)&&_0x3ac1a4>0x0&&_0x3ac1a4<=0xffff;}function parseIpPortCountry(_0x1dcaca){const _0x5d09d2=_0x4a89ab,_0x24e561=_0x1dcaca[_0x5d09d2(0x19c)]();if(!_0x24e561||_0x24e561[_0x5d09d2(0x185)]('//')||_0x24e561[_0x5d09d2(0x185)]('/*')||_0x24e561[_0x5d09d2(0x185)]('*')||_0x24e561['startsWith']('#!')||_0x24e561[_0x5d09d2(0x185)]('<!--')||_0x24e561[_0x5d09d2(0x1b2)]()[_0x5d09d2(0x185)](_0x5d09d2(0x1b0))||_0x24e561['includes']('://')||_0x24e561[_0x5d09d2(0x1c3)]('www.')||/^[a-zA-Z\s]+$/[_0x5d09d2(0x1bd)](_0x24e561))return null;const _0x4e85a3=[/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}):(\d+)#(.+)$/,/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})#(.+)$/,/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}):(\d+)(?:\s.*|$)/,/^\s*(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\s*$/,/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?:\s|$)/,/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d+))?(?:#(.+?)(?:\s|$))?/];for(let _0x5ddb5f=0x0;_0x5ddb5f<_0x4e85a3['length'];_0x5ddb5f++){const _0x4153e1=_0x4e85a3[_0x5ddb5f],_0x3a5cb4=_0x24e561[_0x5d09d2(0x147)](_0x4153e1);if(_0x3a5cb4){const _0x504045=_0x3a5cb4[0x1],_0x2194e2=_0x3a5cb4[0x2]||null,_0x2f33b0=_0x3a5cb4[0x3]||null;if(!isValidIP(_0x504045))continue;if(_0x2194e2&&!isValidPort(_0x2194e2))continue;let _0x839875=null;_0x2f33b0&&(_0x839875=_0x2f33b0[_0x5d09d2(0x19c)]()[_0x5d09d2(0x143)](/[^\u4e00-\u9fa5\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af\w\s\-\.]/g,'')['replace'](/\s+/g,'\x20')[_0x5d09d2(0x19c)](),(!_0x839875||_0x839875['length']<0x2||_0x839875[_0x5d09d2(0x194)]>0x32||/^\d+$/['test'](_0x839875)||/^[^\u4e00-\u9fa5a-zA-Z]+$/[_0x5d09d2(0x1bd)](_0x839875)||/^[\.\-\s]+$/['test'](_0x839875))&&(_0x839875=null));if(_0x5ddb5f===0x3){const _0x539d0b=_0x24e561[_0x5d09d2(0x143)](/^\s*\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\s*$/,'')[_0x5d09d2(0x19c)]();if(_0x539d0b['length']>0x0)continue;}return{'ip':_0x2194e2?_0x504045+':'+_0x2194e2:_0x504045,'country':_0x839875,'hasCountryInfo':!!_0x839875};}}return null;}function findAllIpsInLine(_0x951c22){const _0x3f8044=_0x4a89ab,_0x26b943=[],_0x2f79e3=/\b(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d+))?(?:\s*[#\s]\s*([^\s\r\n,;|]+(?:\s+[^\s\r\n,;|]+)*))?\b/g;let _0x1f0cc2;while((_0x1f0cc2=_0x2f79e3['exec'](_0x951c22))!==null){const _0x200fcb=_0x1f0cc2[0x1],_0x3fd4bf=_0x1f0cc2[0x2]||null,_0x4bbdc7=_0x1f0cc2[0x3]||null;if(!isValidIP(_0x200fcb))continue;if(_0x3fd4bf&&!isValidPort(_0x3fd4bf))continue;let _0x58c033=null;_0x4bbdc7&&(_0x58c033=_0x4bbdc7[_0x3f8044(0x19c)]()[_0x3f8044(0x143)](/[^\u4e00-\u9fa5\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af\w\s\-\.]/g,'')[_0x3f8044(0x143)](/\s+/g,'\x20')[_0x3f8044(0x19c)](),(!_0x58c033||_0x58c033[_0x3f8044(0x194)]<0x2||_0x58c033[_0x3f8044(0x194)]>0x32||/^\d+$/[_0x3f8044(0x1bd)](_0x58c033)||/^[^\u4e00-\u9fa5a-zA-Z]+$/[_0x3f8044(0x1bd)](_0x58c033)||/^[\.\-\s]+$/[_0x3f8044(0x1bd)](_0x58c033))&&(_0x58c033=null)),_0x26b943[_0x3f8044(0x130)]({'ip':_0x3fd4bf?_0x200fcb+':'+_0x3fd4bf:_0x200fcb,'country':_0x58c033,'hasCountryInfo':!!_0x58c033});}if(_0x26b943[_0x3f8044(0x194)]===0x0){const _0x5e1068=/\b(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\b/g;let _0x26a52c;while((_0x26a52c=_0x5e1068[_0x3f8044(0x139)](_0x951c22))!==null){const _0x514fa3=_0x26a52c[0x1];if(!isValidIP(_0x514fa3))continue;const _0xab8976=_0x26b943['some'](_0x22e3e5=>_0x22e3e5['ip'][_0x3f8044(0x191)](':')[0x0]===_0x514fa3);if(_0xab8976)continue;_0x26b943['push']({'ip':_0x514fa3,'country':null,'hasCountryInfo':![]});}}return _0x26b943;}function extractAllIpsFromText(_0x39a2a0){const _0x14bcad=_0x4a89ab,_0x4a89f8=_0x39a2a0[_0x14bcad(0x191)](/[\r\n]+/),_0x4dafcf=[],_0x5e36e1=new Set();for(const _0x1ee99b of _0x4a89f8){if(_0x1ee99b[_0x14bcad(0x194)]>0x1f4||_0x1ee99b[_0x14bcad(0x1c3)](_0x14bcad(0x18c))||_0x1ee99b['includes']('<style')||_0x1ee99b[_0x14bcad(0x1c3)](_0x14bcad(0x192))||_0x1ee99b[_0x14bcad(0x1c3)](_0x14bcad(0x144))||_0x1ee99b[_0x14bcad(0x1c3)](_0x14bcad(0x19f))||_0x1ee99b[_0x14bcad(0x1c3)](_0x14bcad(0x1c4)))continue;let _0xd1fe5e=parseIpPortCountry(_0x1ee99b);if(_0xd1fe5e){const _0x66c638=_0xd1fe5e['ip'][_0x14bcad(0x191)](':')[0x0];!_0x5e36e1[_0x14bcad(0x1dc)](_0x66c638)&&(_0x5e36e1[_0x14bcad(0x189)](_0x66c638),_0x4dafcf[_0x14bcad(0x130)](_0xd1fe5e));}else{const _0x3e3717=findAllIpsInLine(_0x1ee99b);for(const _0x4c5ade of _0x3e3717){const _0x12de54=_0x4c5ade['ip'][_0x14bcad(0x191)](':')[0x0];!_0x5e36e1[_0x14bcad(0x1dc)](_0x12de54)&&(_0x5e36e1[_0x14bcad(0x189)](_0x12de54),_0x4dafcf[_0x14bcad(0x130)](_0x4c5ade));}}}return _0x4dafcf;}function preProcessUrl(_0x510965){const _0x53646d=_0x4a89ab,_0x2b9549=(_0x510965[_0x53646d(0x185)]('{BASS}://')||_0x510965[_0x53646d(0x185)](PROTOCOL['pm']+'ess://'))&&_0x510965['split'](_0x53646d(0x18f))[0x1]['charAt'](0x0)!=='{';if(_0x2b9549){const _0x1145c4=atob(_0x510965[_0x53646d(0x191)](_0x53646d(0x18f))[0x1]);return PROTOCOL['pm']+_0x53646d(0x13c)+_0x1145c4[_0x53646d(0x143)](/\{PASS\}\-/g,'')[_0x53646d(0x143)](/\{PA/g,PROTOCOL[_0x53646d(0x12c)])[_0x53646d(0x143)](/SS\}/g,PROTOCOL['xieyi2'])[_0x53646d(0x143)](/\{BA/g,PROTOCOL['pm']);}return _0x510965[_0x53646d(0x143)](/\{PASS\}\-/g,'')[_0x53646d(0x143)](/\{PA/g,PROTOCOL[_0x53646d(0x12c)])[_0x53646d(0x143)](/SS\}/g,PROTOCOL['xieyi2'])[_0x53646d(0x143)](/\{BA/g,PROTOCOL['pm']);}function shouldExcludeUrl(_0x326ec4){const _0x16f56d=_0x4a89ab;return excludeKeywords[_0x16f56d(0x191)](';')[_0x16f56d(0x1af)](_0x5df842=>_0x5df842['trim']())['some'](_0x44117f=>_0x326ec4['includes'](_0x44117f));}function getSubUrls(_0x15a8d4,_0x413894){const _0x307ecd=_0x4a89ab,_0x3f4acf=_0x413894[_0x307ecd(0x17f)](_0x307ecd(0x180));if(_0x3f4acf)return console[_0x307ecd(0x1cf)](_0x307ecd(0x177),_0x3f4acf),_0x3f4acf[_0x307ecd(0x191)](';')[_0x307ecd(0x1af)](_0x424af4=>_0x424af4['trim']())[_0x307ecd(0x1af)](_0x4dd6c7=>preProcessUrl(_0x4dd6c7))[_0x307ecd(0x1a3)](_0x3e6b72=>typeof _0x3e6b72===_0x307ecd(0x1d7)&&!shouldExcludeUrl(_0x3e6b72));const _0x1f2947=_0x15a8d4[_0x307ecd(0x156)];if(_0x1f2947)return console[_0x307ecd(0x1cf)](_0x307ecd(0x18d),_0x1f2947),_0x1f2947[_0x307ecd(0x191)](';')[_0x307ecd(0x1af)](_0x37c0ef=>_0x37c0ef[_0x307ecd(0x19c)]())[_0x307ecd(0x1af)](_0x4c2a7b=>preProcessUrl(_0x4c2a7b))['filter'](_0x207fd7=>typeof _0x207fd7===_0x307ecd(0x1d7)&&!shouldExcludeUrl(_0x207fd7));return console[_0x307ecd(0x1cf)]('Using\x20SUB\x20URLs\x20from\x20CONFIG:',CONFIG[_0x307ecd(0x156)]),(CONFIG[_0x307ecd(0x156)]||'')['split'](';')[_0x307ecd(0x1af)](_0x4af429=>_0x4af429[_0x307ecd(0x19c)]())[_0x307ecd(0x1af)](_0x4cd39c=>preProcessUrl(_0x4cd39c))[_0x307ecd(0x1a3)](_0xadcd83=>typeof _0xadcd83===_0x307ecd(0x1d7)&&!shouldExcludeUrl(_0xadcd83));}async function extractIpsFromResponse(_0x4c4e00){const _0x581aef=_0x4a89ab;let _0x2e8034=[];const _0x51d998=_0x4c4e00[_0x581aef(0x1a5)]['get']('content-type');let _0x844c17;try{_0x844c17=await _0x4c4e00[_0x581aef(0x1a4)]();if(_0x51d998&&_0x51d998['includes'](_0x581aef(0x1a2)))try{const _0x45f6b3=JSON[_0x581aef(0x18b)](_0x844c17),_0x4314ac=_0x2ed041=>{const _0x2e4a45=_0x581aef;if(typeof _0x2ed041===_0x2e4a45(0x1d7)){const _0x492a30=extractAllIpsFromText(_0x2ed041);_0x2e8034[_0x2e4a45(0x130)](..._0x492a30);}else{if(Array[_0x2e4a45(0x14a)](_0x2ed041))_0x2ed041[_0x2e4a45(0x17c)](_0x2bcaa6=>{const _0x16d6c0=_0x2e4a45;if(typeof _0x2bcaa6===_0x16d6c0(0x1d7)){const _0x3faef8=extractAllIpsFromText(_0x2bcaa6);_0x2e8034[_0x16d6c0(0x130)](..._0x3faef8);}else typeof _0x2bcaa6===_0x16d6c0(0x1aa)&&_0x4314ac(_0x2bcaa6);});else{if(typeof _0x2ed041===_0x2e4a45(0x1aa)&&_0x2ed041!==null)for(const _0x286f2c in _0x2ed041){_0x2ed041[_0x2e4a45(0x1de)](_0x286f2c)&&_0x4314ac(_0x2ed041[_0x286f2c]);}}}};_0x4314ac(_0x45f6b3);}catch(_0x3e3386){console['error'](_0x581aef(0x163),_0x3e3386);const _0x352a20=extractAllIpsFromText(_0x844c17);_0x2e8034[_0x581aef(0x130)](..._0x352a20);}else{const _0x2469fa=extractAllIpsFromText(_0x844c17);_0x2e8034[_0x581aef(0x130)](..._0x2469fa);}}catch(_0x43a4b8){console[_0x581aef(0x1a0)](_0x581aef(0x137),_0x43a4b8);}const _0x5171f1=[],_0x405312=new Set();for(const _0x27233d of _0x2e8034){const _0x338300=_0x27233d['ip'][_0x581aef(0x191)](':')[0x0];!_0x405312['has'](_0x338300)&&(_0x405312[_0x581aef(0x189)](_0x338300),_0x5171f1[_0x581aef(0x130)](_0x27233d));}return console['log']('Successfully\x20extracted\x20'+_0x5171f1[_0x581aef(0x194)]+'\x20unique\x20IP\x20entries\x20from\x20response'),_0x5171f1;}function getCountryChineseName(_0x3c4f35){return countryMapping[_0x3c4f35]||null;}function getCountryCodeFromChinese(_0x110310){const _0x1f843c=_0x4a89ab;for(const [_0x16a5e2,_0x35ff32]of Object['entries'](countryMapping)){if(_0x35ff32===_0x110310||_0x110310[_0x1f843c(0x1c3)](_0x35ff32))return _0x16a5e2;}return null;}export default{async 'fetch'(_0x124909,_0x1d3116){const _0x5108f4=_0x4a89ab,_0x287bb5=new URL(_0x124909['url']);if(_0x287bb5[_0x5108f4(0x13a)]==='/'||_0x287bb5[_0x5108f4(0x13a)]==='')return new Response(_0x5108f4(0x1cc),{'headers':{'content-type':_0x5108f4(0x195)}});if(_0x287bb5['pathname']===_0x5108f4(0x17a)+CONFIG[_0x5108f4(0x157)])return handleToken(_0x124909,_0x1d3116);return new Response(_0x5108f4(0x1b7),{'status':0x194});}};async function handleToken(_0x554365,_0x300df6){const _0x3a25dc=_0x4a89ab,_0x66ae67=new URL(_0x554365[_0x3a25dc(0x186)])[_0x3a25dc(0x187)],_0x3c2321=_0x66ae67[_0x3a25dc(0x17f)](_0x3a25dc(0x166));if(!_0x3c2321)return new Response(_0x3a25dc(0x145),{'status':0x190});let _0x16dc06=[],_0x6647ae=[];const _0x2c1ffd=_0x66ae67[_0x3a25dc(0x17f)](_0x3a25dc(0x186));if(_0x2c1ffd)_0x6647ae=_0x2c1ffd[_0x3a25dc(0x191)](';')[_0x3a25dc(0x1af)](_0x1a6d34=>_0x1a6d34[_0x3a25dc(0x19c)]())[_0x3a25dc(0x1a3)](Boolean),console[_0x3a25dc(0x1cf)](_0x3a25dc(0x138),_0x6647ae);else{const _0x1f4a80=_0x300df6[_0x3a25dc(0x196)];_0x1f4a80&&(_0x6647ae=_0x1f4a80[_0x3a25dc(0x191)](';')[_0x3a25dc(0x1af)](_0x251e8b=>_0x251e8b[_0x3a25dc(0x19c)]())[_0x3a25dc(0x1a3)](Boolean),console[_0x3a25dc(0x1cf)]('Using\x20API\x20URLs\x20from\x20environment\x20variable:',_0x6647ae)),_0x6647ae[_0x3a25dc(0x194)]===0x0&&(_0x6647ae=(CONFIG[_0x3a25dc(0x196)]||'')['split'](';')[_0x3a25dc(0x1af)](_0x9d3c16=>_0x9d3c16[_0x3a25dc(0x19c)]())[_0x3a25dc(0x1a3)](Boolean),console[_0x3a25dc(0x1cf)](_0x3a25dc(0x1d4),_0x6647ae));}if(_0x6647ae[_0x3a25dc(0x194)]===0x0)return new Response(_0x3a25dc(0x1ab),{'status':0x190});try{let _0x417852=[];for(const _0x20c176 of _0x6647ae){try{console[_0x3a25dc(0x1cf)](_0x3a25dc(0x1d3)+_0x20c176);const _0xe52f94=await fetch(_0x20c176);if(!_0xe52f94['ok']){console[_0x3a25dc(0x1a0)]('HTTP\x20Error\x20for\x20'+_0x20c176+':\x20'+_0xe52f94[_0x3a25dc(0x183)]);continue;}const _0x30211f=await extractIpsFromResponse(_0xe52f94);console[_0x3a25dc(0x1cf)]('Extracted\x20'+_0x30211f[_0x3a25dc(0x194)]+'\x20IPs\x20from\x20'+_0x20c176),_0x417852[_0x3a25dc(0x130)](..._0x30211f);}catch(_0x3459db){console[_0x3a25dc(0x1a0)]('Error\x20fetching\x20data\x20from\x20'+_0x20c176+':',_0x3459db);}}if(_0x417852[_0x3a25dc(0x194)]===0x0)return new Response(_0x3a25dc(0x1a8),{'status':0x190});const _0x740347=[],_0x5489a9=new Set();for(const _0x107479 of _0x417852){const _0x4d7535=_0x107479['ip']['split'](':')[0x0];if(!_0x5489a9['has'](_0x4d7535))_0x5489a9[_0x3a25dc(0x189)](_0x4d7535),_0x740347['push'](_0x107479);else{const _0x214e13=_0x740347[_0x3a25dc(0x1c6)](_0x580d34=>_0x580d34['ip'][_0x3a25dc(0x191)](':')[0x0]===_0x4d7535);_0x214e13!==-0x1&&_0x107479[_0x3a25dc(0x12e)]&&!_0x740347[_0x214e13][_0x3a25dc(0x12e)]&&(_0x740347[_0x214e13]=_0x107479);}}console[_0x3a25dc(0x1cf)](_0x3a25dc(0x168)+_0x740347['length']),_0x16dc06=await Promise['all'](_0x740347['map'](async _0x234f6c=>{const _0x889c7a=_0x3a25dc;if(_0x234f6c[_0x889c7a(0x12e)]&&_0x234f6c[_0x889c7a(0x188)]){let _0x26d18d=getCountryCodeFromChinese(_0x234f6c[_0x889c7a(0x188)]);return!_0x26d18d&&(_0x26d18d=_0x234f6c[_0x889c7a(0x188)]),{'ip':_0x234f6c['ip'],'country':_0x26d18d,'originalCountry':_0x234f6c['country']};}else try{const _0x304676=await fetch(_0x889c7a(0x176)+_0x234f6c['ip'][_0x889c7a(0x191)](':')[0x0]+_0x889c7a(0x149));if(!_0x304676['ok'])return console['warn']('Error\x20fetching\x20country\x20for\x20IP\x20'+_0x234f6c['ip']+':\x20'+_0x304676[_0x889c7a(0x183)]),{'ip':_0x234f6c['ip'],'country':'unknown'};const _0x44b1c3=await _0x304676[_0x889c7a(0x178)]();return{'ip':_0x234f6c['ip'],'country':_0x44b1c3[_0x889c7a(0x188)]||_0x889c7a(0x152)};}catch(_0x140fca){return console[_0x889c7a(0x16a)](_0x889c7a(0x146)+_0x234f6c['ip']+':\x20'+_0x140fca),{'ip':_0x234f6c['ip'],'country':'unknown'};}})),_0x16dc06=_0x16dc06[_0x3a25dc(0x1a3)](_0x5c0639=>_0x5c0639[_0x3a25dc(0x188)]!==_0x3a25dc(0x152));if(_0x16dc06[_0x3a25dc(0x194)]===0x0)return new Response(_0x3a25dc(0x132),{'status':0x190});}catch(_0x33beee){return console[_0x3a25dc(0x1a0)]('Error\x20fetching\x20or\x20processing\x20IP\x20data:',_0x33beee),new Response(_0x3a25dc(0x1b1),{'status':0x1f4});}let _0x26cee8=getSubUrls(_0x300df6,_0x66ae67);const _0x39721b=_0x26cee8[_0x3a25dc(0x1a3)](_0x269214=>!excludeKeywords[_0x3a25dc(0x191)](';')['map'](_0x228dff=>_0x228dff[_0x3a25dc(0x19c)]())[_0x3a25dc(0x1d0)](_0x347124=>_0x269214['includes'](_0x347124)));let _0x4acf64=[],_0x4a6c99=[];const _0x2ceaad=_0x66ae67[_0x3a25dc(0x17f)](_0x3a25dc(0x1d6));_0x2ceaad?_0x4a6c99=_0x2ceaad[_0x3a25dc(0x191)](';')[_0x3a25dc(0x1af)](_0x23f4cf=>_0x23f4cf[_0x3a25dc(0x19c)]())[_0x3a25dc(0x1a3)](Boolean):_0x4a6c99=(CONFIG['CFIPS']||'')['split'](';')[_0x3a25dc(0x1af)](_0x2463fa=>_0x2463fa[_0x3a25dc(0x19c)]())[_0x3a25dc(0x1a3)](Boolean);for(const _0x33e7f6 of _0x39721b){for(const _0x42dacf of _0x4a6c99){let _0x3a2160=_0x33e7f6;if(_0x33e7f6['includes'](_0x3a25dc(0x1cb))){const _0x4c27dd=getCountryChineseName(CONFIG[_0x3a25dc(0x1c7)])||CONFIG['COUNTRY_REPLACE'];_0x3a2160=_0x3a2160['replace'](/ip\.sb/g,_0x42dacf)[_0x3a25dc(0x143)](/Country/g,_0x4c27dd),_0x3a2160=_0x3a2160['replace'](/\b(443|8443)\b/g,_0x3c2321);}else _0x3a2160=_0x3a2160[_0x3a25dc(0x143)](/YOUXUAN_IP|ip\.sb/g,_0x42dacf),_0x3a2160=_0x3a2160[_0x3a25dc(0x143)](/\b(443|8443)\b/g,_0x3c2321);_0x3a2160=_0x3a2160[_0x3a25dc(0x143)](/CF_PORT/g,_0x3c2321),(_0x3c2321==='80'||_0x3c2321===_0x3a25dc(0x1c2))&&(_0x3a2160=_0x3a2160['replace'](/=tls/g,_0x3a25dc(0x179))[_0x3a25dc(0x143)](/tls\",/g,'\x22,')),_0x4acf64[_0x3a25dc(0x130)](_0x3a2160);}}for(const _0x19d0f1 of _0x39721b){if(_0x19d0f1[_0x3a25dc(0x1c3)](_0x3a25dc(0x1cb)))for(const _0x1175b6 of _0x16dc06){let _0x517095;_0x1175b6[_0x3a25dc(0x1ac)]?_0x517095=_0x1175b6[_0x3a25dc(0x1ac)]:_0x517095=getCountryChineseName(_0x1175b6['country']);if(!_0x517095)continue;let _0x449363=_0x19d0f1['replace'](/ip\.sb/g,_0x1175b6['ip'][_0x3a25dc(0x191)](':')[0x0])[_0x3a25dc(0x143)](/Country/g,_0x517095);const _0xa498e9=_0x1175b6['ip'][_0x3a25dc(0x147)](/:(\d+)$/);_0xa498e9?_0x449363=_0x449363[_0x3a25dc(0x143)](/\b(443|8443)\b/g,_0xa498e9[0x1]):_0x449363=_0x449363[_0x3a25dc(0x143)](/\b(443|8443)\b/g,_0x3c2321),_0x449363=_0x449363[_0x3a25dc(0x143)](/CF_PORT/g,_0x3c2321),(_0x3c2321==='80'||_0x3c2321===_0x3a25dc(0x1c2))&&(_0x449363=_0x449363[_0x3a25dc(0x143)](/=tls/g,_0x3a25dc(0x179))[_0x3a25dc(0x143)](/tls\",/g,'\x22,')),_0x4acf64['push'](_0x449363);}else for(const _0x55ec09 of _0x16dc06){if(_0x55ec09[_0x3a25dc(0x188)]==='unknown')continue;let _0x48e215=_0x19d0f1[_0x3a25dc(0x143)](/YOUXUAN_IP|ip\.sb/g,_0x55ec09['ip']['split'](':')[0x0]);const _0x3ef0df=_0x55ec09['ip']['match'](/:(\d+)$/);_0x3ef0df?_0x48e215=_0x48e215[_0x3a25dc(0x143)](/\b(443|8443)\b/g,_0x3ef0df[0x1]):_0x48e215=_0x48e215[_0x3a25dc(0x143)](/\b(443|8443)\b/g,_0x3c2321),_0x48e215=_0x48e215[_0x3a25dc(0x143)](/CF_PORT/g,_0x3c2321),(_0x3c2321==='80'||_0x3c2321==='8080')&&(_0x48e215=_0x48e215[_0x3a25dc(0x143)](/=tls/g,'=none')[_0x3a25dc(0x143)](/tls\",/g,'\x22,')),_0x4acf64[_0x3a25dc(0x130)](_0x48e215);}}let _0x4eafcf=[];for(const _0x26712d of _0x4acf64){if(_0x26712d[_0x3a25dc(0x1b2)]()[_0x3a25dc(0x185)](_0x3a25dc(0x15a))||_0x26712d[_0x3a25dc(0x1b2)]()[_0x3a25dc(0x185)](_0x3a25dc(0x12d)))try{const _0x168f7b=await fetch(_0x26712d);let _0x283d35=await _0x168f7b[_0x3a25dc(0x1a4)]();try{_0x283d35=atob(_0x283d35);}catch(_0x565ec8){console[_0x3a25dc(0x1cf)]('订阅内容不是base64编码，使用原始内容');}const _0x1fde6f=_0x283d35['split']('\x0a')[_0x3a25dc(0x1a3)](_0x397810=>_0x397810['trim']())[_0x3a25dc(0x1a3)](_0xcac2c7=>!shouldExcludeUrl(_0xcac2c7));_0x4eafcf=_0x4eafcf['concat'](_0x1fde6f);}catch(_0x396713){console[_0x3a25dc(0x1a0)](_0x3a25dc(0x18e),_0x396713);}else _0x4eafcf[_0x3a25dc(0x130)](_0x26712d);}_0x4eafcf=_0x4eafcf[_0x3a25dc(0x1af)](_0x5bccff=>{const _0x5e5ea9=_0x3a25dc;if(_0x5bccff['startsWith'](_0x5e5ea9(0x19e))||_0x5bccff['startsWith'](PROTOCOL['pm']+_0x5e5ea9(0x13c))){const _0x3b7b6a=_0x5bccff[_0x5e5ea9(0x191)](_0x5e5ea9(0x18f))[0x1];if(_0x3b7b6a&&_0x3b7b6a[_0x5e5ea9(0x173)]()[_0x5e5ea9(0x140)](0x0)==='{')return PROTOCOL['pm']+_0x5e5ea9(0x13c)+btoa(_0x3b7b6a);}return _0x5bccff;});const _0x579caa=new TextEncoder(),_0x40063e=_0x579caa[_0x3a25dc(0x14f)](_0x4eafcf['join']('\x0a')),_0x54f1f7=Array['from'](_0x40063e)[_0x3a25dc(0x1af)](_0x571d14=>String['fromCharCode'](_0x571d14))[_0x3a25dc(0x15c)](''),_0x3f1109=btoa(_0x54f1f7);return new Response(_0x3f1109,{'headers':{'Content-Type':_0x3a25dc(0x195)}});}

