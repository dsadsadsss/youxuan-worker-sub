//设置变量SUB添加节点，节点名称设为Country-名称，优选ip设置为ip.sb,脚本会自动替换国家和优选，多条链接分号;隔开
#SUB中节点设置例子:vl已ss://9ca1ad-05861c-47f-abd-fc692216518f8@ip.sb:443?mode=stream-one&path=%2Fxhttp%2F&security=tls&alpn=h2&encryption=none&host=xhttp.nez.com&fp=chrome&type=xhttp&sni=xhttp.nez.com#Country-甲骨文
//订阅链接格式:域名/token=值?cf_port=值
//以下是我找到的优选ip的api地址，你也可以搭建自己的api
//https://raw.githubusercontent.com/ymyuuu/IPDB/refs/heads/main/bestproxy.txt
//https://raw.githubusercontent.com/ymyuuu/IPDB/refs/heads/main/bestcf.txt
//https://ip.164746.xyz/ipTop10.html
//https://raw.githubusercontent.com/ZhiXuanWang/cf-speed-dns/refs/heads/main/ipTop10.html
//https://vps789.com/public/sum/cfIpApi
//https://www.wetest.vip/api/cf2dns/get_cloudflare_ip&type=v4&key=o1zrmHAF
//https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesapi.txt
//https://addressesapi.090227.xyz/CloudFlareYes
//https://addressesapi.090227.xyz/ip.164746.xyz
//ts.hpc.tw,proxyip.fxxk.dedyn.io
const CONFIG = {
    TOKEN: '123',  //订阅链接密钥
    API: 'https://raw.githubusercontent.com/qwer-search/bestip/refs/heads/main/kejilandbestip.txt',  //优选ip的api,多个用;隔开
    SUB: '',  //自定义链接,多个用;隔开
    CFIPS: 'ip.sb;bestcf.030101.xyz;cf.090227.xyz' ,//优选域名,多个用;隔开
    COUNTRY_REPLACE: 'YM' // 默认
};

//排除包含关键词的节点
const excludeKeywords = 'GB-eu.com;TW-free.tw';
const _0x59ba09=_0x3a77;(function(_0x3a86a4,_0x59f06b){const _0x4961ea=_0x3a77,_0x13142f=_0x3a86a4();while(!![]){try{const _0x46cbbb=parseInt(_0x4961ea(0x148))/0x1+parseInt(_0x4961ea(0x1c3))/0x2+-parseInt(_0x4961ea(0x1bb))/0x3+-parseInt(_0x4961ea(0x187))/0x4+parseInt(_0x4961ea(0x12b))/0x5*(parseInt(_0x4961ea(0x1af))/0x6)+-parseInt(_0x4961ea(0x19d))/0x7+-parseInt(_0x4961ea(0x191))/0x8*(parseInt(_0x4961ea(0x12d))/0x9);if(_0x46cbbb===_0x59f06b)break;else _0x13142f['push'](_0x13142f['shift']());}catch(_0x1615be){_0x13142f['push'](_0x13142f['shift']());}}}(_0x41e5,0x438a5));function _0x3a77(_0x206729,_0x684ad5){const _0x41e5a2=_0x41e5();return _0x3a77=function(_0x3a7723,_0x32b26d){_0x3a7723=_0x3a7723-0x12a;let _0x15403c=_0x41e5a2[_0x3a7723];return _0x15403c;},_0x3a77(_0x206729,_0x684ad5);}const countryMapping={'CN':'中国','HK':'香港','TW':'台湾','JP':'日本','KR':'韩国','SG':_0x59ba09(0x188),'MY':'马来','TH':'泰国','VN':'越南','ID':'印尼','IN':'印度','PH':_0x59ba09(0x167),'BN':'文莱','MO':'澳门','KH':_0x59ba09(0x165),'LA':'老挝','MM':'缅甸','NP':_0x59ba09(0x1c8),'PK':'巴基斯坦','BD':_0x59ba09(0x17d),'LK':_0x59ba09(0x16f),'MV':_0x59ba09(0x190),'AE':'阿联酋','IL':'以色列','TR':'土耳其','IQ':_0x59ba09(0x192),'IR':'伊朗','SA':'沙特','QA':_0x59ba09(0x149),'JO':'约旦','LB':'黎巴嫩','OM':'阿曼','BH':'巴林','KW':_0x59ba09(0x1d1),'KZ':_0x59ba09(0x1b1),'UZ':_0x59ba09(0x1be),'MN':'蒙古','US':'美国','CA':_0x59ba09(0x12c),'MX':'墨西哥','PR':_0x59ba09(0x16a),'CU':'古巴','PA':_0x59ba09(0x15c),'CR':_0x59ba09(0x13d),'GT':_0x59ba09(0x18a),'SV':'萨尔瓦多','HN':'洪都拉斯','NI':_0x59ba09(0x14d),'JM':_0x59ba09(0x1bd),'DO':_0x59ba09(0x177),'BS':_0x59ba09(0x196),'BZ':'伯利兹','HT':'海地','BR':'巴西','AR':_0x59ba09(0x132),'CL':'智利','CO':_0x59ba09(0x15e),'PE':'秘鲁','VE':_0x59ba09(0x17f),'EC':'厄瓜多尔','BO':_0x59ba09(0x164),'PY':'巴拉圭','UY':'乌拉圭','GY':'圭亚那','SR':'苏里南','DE':'德国','GB':'英国','FR':'法国','IT':'意大利','ES':_0x59ba09(0x172),'PT':_0x59ba09(0x1a3),'CH':'瑞士','AT':'奥地利','NL':'荷兰','BE':'比利时','LU':'卢森堡','SE':'瑞典','NO':'挪威','DK':'丹麦','FI':'芬兰','IE':_0x59ba09(0x13a),'IS':'冰岛','GR':'希腊','RU':_0x59ba09(0x178),'UA':'乌克兰','PL':'波兰','CZ':'捷克','HU':_0x59ba09(0x18b),'RO':_0x59ba09(0x19e),'BG':_0x59ba09(0x1ce),'HR':_0x59ba09(0x1aa),'RS':_0x59ba09(0x17b),'SI':_0x59ba09(0x189),'SK':'斯洛伐克','MD':_0x59ba09(0x13b),'BY':_0x59ba09(0x1a2),'AL':_0x59ba09(0x145),'BA':'波黑','EE':_0x59ba09(0x163),'LV':'拉脱维亚','LT':_0x59ba09(0x179),'MK':_0x59ba09(0x169),'ME':'黑山','CY':'塞浦路斯','MT':_0x59ba09(0x1ae),'AU':_0x59ba09(0x1b7),'NZ':_0x59ba09(0x1a6),'FJ':'斐济','PG':_0x59ba09(0x199),'SB':'所罗门群岛','VU':_0x59ba09(0x19b),'ZA':'南非','EG':'埃及','MA':_0x59ba09(0x1cd),'NG':_0x59ba09(0x17c),'KE':'肯尼亚','GH':'加纳','DZ':'阿尔及利亚','TN':_0x59ba09(0x13c),'ET':_0x59ba09(0x135),'TZ':_0x59ba09(0x18e),'UG':_0x59ba09(0x17e),'SN':_0x59ba09(0x154),'CG':'刚果','CI':_0x59ba09(0x133),'CM':_0x59ba09(0x162),'ZW':_0x59ba09(0x173),'SD':'苏丹','LY':_0x59ba09(0x1b0),'AO':_0x59ba09(0x19f),'MU':_0x59ba09(0x198),'MG':_0x59ba09(0x143),'SC':_0x59ba09(0x150),'NA':_0x59ba09(0x15f),'BW':_0x59ba09(0x1bc),'MW':_0x59ba09(0x16b),'RW':_0x59ba09(0x161),'SS':'南苏丹','ZM':_0x59ba09(0x12a),'VA':'梵蒂冈','AQ':'南极','GL':_0x59ba09(0x1a4),'IM':_0x59ba09(0x184),'JE':'泽西岛','MC':_0x59ba09(0x141),'SM':_0x59ba09(0x14c),'LI':_0x59ba09(0x1c1),'AD':_0x59ba09(0x193),'GI':_0x59ba09(0x153),'YM':_0x59ba09(0x16c)},PROTOCOL={'xieyi':'vl','xieyi2':_0x59ba09(0x1b6),'pm':'vm'};function isValidIP(_0x56913c){const _0x37a956=_0x59ba09,_0x227546=_0x56913c[_0x37a956(0x1ad)]('.');if(_0x227546['length']!==0x4)return![];for(const _0x5eb353 of _0x227546){const _0x2e35b7=parseInt(_0x5eb353,0xa);if(isNaN(_0x2e35b7)||_0x2e35b7<0x0||_0x2e35b7>0xff)return![];if(_0x5eb353[_0x37a956(0x174)]>0x1&&_0x5eb353[0x0]==='0')return![];}return!![];}function isValidPort(_0x4fe818){const _0x5790d1=parseInt(_0x4fe818,0xa);return!isNaN(_0x5790d1)&&_0x5790d1>0x0&&_0x5790d1<=0xffff;}function parseIpPortCountry(_0x1e5bf7){const _0x313484=_0x59ba09,_0x5ec8a5=_0x1e5bf7[_0x313484(0x13e)]();if(!_0x5ec8a5||_0x5ec8a5['startsWith']('//')||_0x5ec8a5['startsWith']('/*')||_0x5ec8a5[_0x313484(0x18f)]('*')||_0x5ec8a5['startsWith']('#!')||_0x5ec8a5[_0x313484(0x18f)](_0x313484(0x185))||_0x5ec8a5[_0x313484(0x175)]()[_0x313484(0x18f)](_0x313484(0x1ba))||_0x5ec8a5[_0x313484(0x1a8)](_0x313484(0x142))||_0x5ec8a5[_0x313484(0x1a8)](_0x313484(0x15a))||/^[a-zA-Z\s]+$/[_0x313484(0x171)](_0x5ec8a5))return null;const _0x44c35d=[/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}):(\d+)#(.+)$/,/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})#(.+)$/,/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}):(\d+)(?:\s.*|$)/,/^\s*(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\s*$/,/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?:\s|$)/,/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d+))?(?:#(.+?)(?:\s|$))?/];for(let _0x4edab0=0x0;_0x4edab0<_0x44c35d[_0x313484(0x174)];_0x4edab0++){const _0x303f37=_0x44c35d[_0x4edab0],_0x506da9=_0x5ec8a5[_0x313484(0x14f)](_0x303f37);if(_0x506da9){const _0x1a03fc=_0x506da9[0x1],_0x1bafe7=_0x506da9[0x2]||null,_0x1af50e=_0x506da9[0x3]||null;if(!isValidIP(_0x1a03fc))continue;if(_0x1bafe7&&!isValidPort(_0x1bafe7))continue;let _0x3bc249=null;_0x1af50e&&(_0x3bc249=_0x1af50e['trim']()[_0x313484(0x1cf)](/[^\u4e00-\u9fa5\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af\w\s\-\.]/g,'')[_0x313484(0x1cf)](/\s+/g,'\x20')[_0x313484(0x13e)](),(!_0x3bc249||_0x3bc249[_0x313484(0x174)]<0x2||_0x3bc249[_0x313484(0x174)]>0x32||/^\d+$/['test'](_0x3bc249)||/^[^\u4e00-\u9fa5a-zA-Z]+$/[_0x313484(0x171)](_0x3bc249)||/^[\.\-\s]+$/[_0x313484(0x171)](_0x3bc249))&&(_0x3bc249=null));if(_0x4edab0===0x3){const _0x4e3a0b=_0x5ec8a5[_0x313484(0x1cf)](/^\s*\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\s*$/,'')['trim']();if(_0x4e3a0b[_0x313484(0x174)]>0x0)continue;}return{'ip':_0x1bafe7?_0x1a03fc+':'+_0x1bafe7:_0x1a03fc,'country':_0x3bc249,'hasCountryInfo':!!_0x3bc249};}}return null;}function findAllIpsInLine(_0x53a44c){const _0x2512a8=_0x59ba09,_0x13c9cf=[],_0x11a7b3=/\b(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d+))?(?:\s*[#\s]\s*([^\s\r\n,;|]+(?:\s+[^\s\r\n,;|]+)*))?\b/g;let _0x3c4c09;while((_0x3c4c09=_0x11a7b3[_0x2512a8(0x18d)](_0x53a44c))!==null){const _0x8a99ae=_0x3c4c09[0x1],_0x455b8b=_0x3c4c09[0x2]||null,_0x56a588=_0x3c4c09[0x3]||null;if(!isValidIP(_0x8a99ae))continue;if(_0x455b8b&&!isValidPort(_0x455b8b))continue;let _0x5a966b=null;_0x56a588&&(_0x5a966b=_0x56a588[_0x2512a8(0x13e)]()[_0x2512a8(0x1cf)](/[^\u4e00-\u9fa5\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af\w\s\-\.]/g,'')[_0x2512a8(0x1cf)](/\s+/g,'\x20')[_0x2512a8(0x13e)](),(!_0x5a966b||_0x5a966b[_0x2512a8(0x174)]<0x2||_0x5a966b[_0x2512a8(0x174)]>0x32||/^\d+$/[_0x2512a8(0x171)](_0x5a966b)||/^[^\u4e00-\u9fa5a-zA-Z]+$/['test'](_0x5a966b)||/^[\.\-\s]+$/[_0x2512a8(0x171)](_0x5a966b))&&(_0x5a966b=null)),_0x13c9cf[_0x2512a8(0x183)]({'ip':_0x455b8b?_0x8a99ae+':'+_0x455b8b:_0x8a99ae,'country':_0x5a966b,'hasCountryInfo':!!_0x5a966b});}if(_0x13c9cf[_0x2512a8(0x174)]===0x0){const _0x60aa48=/\b(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\b/g;let _0x1a669f;while((_0x1a669f=_0x60aa48[_0x2512a8(0x18d)](_0x53a44c))!==null){const _0x520224=_0x1a669f[0x1];if(!isValidIP(_0x520224))continue;const _0x4ae4e1=_0x13c9cf['some'](_0x11d860=>_0x11d860['ip'][_0x2512a8(0x1ad)](':')[0x0]===_0x520224);if(_0x4ae4e1)continue;_0x13c9cf[_0x2512a8(0x183)]({'ip':_0x520224,'country':null,'hasCountryInfo':![]});}}return _0x13c9cf;}function extractAllIpsFromText(_0x1f6c5f){const _0x14c14e=_0x59ba09,_0x215b73=_0x1f6c5f[_0x14c14e(0x1ad)](/[\r\n]+/),_0x4832c6=[],_0x264e10=new Set();for(const _0x4a99b6 of _0x215b73){if(_0x4a99b6[_0x14c14e(0x174)]>0x1f4||_0x4a99b6[_0x14c14e(0x1a8)](_0x14c14e(0x152))||_0x4a99b6[_0x14c14e(0x1a8)](_0x14c14e(0x1b8))||_0x4a99b6[_0x14c14e(0x1a8)](_0x14c14e(0x157))||_0x4a99b6[_0x14c14e(0x1a8)](_0x14c14e(0x182))||_0x4a99b6[_0x14c14e(0x1a8)](_0x14c14e(0x181))||_0x4a99b6[_0x14c14e(0x1a8)](_0x14c14e(0x1c9)))continue;let _0x1f8e46=parseIpPortCountry(_0x4a99b6);if(_0x1f8e46){const _0x67bdf3=_0x1f8e46['ip'][_0x14c14e(0x1ad)](':')[0x0];!_0x264e10[_0x14c14e(0x1c0)](_0x67bdf3)&&(_0x264e10[_0x14c14e(0x180)](_0x67bdf3),_0x4832c6[_0x14c14e(0x183)](_0x1f8e46));}else{const _0x187e33=findAllIpsInLine(_0x4a99b6);for(const _0x3e0a4d of _0x187e33){const _0x15f11a=_0x3e0a4d['ip']['split'](':')[0x0];!_0x264e10[_0x14c14e(0x1c0)](_0x15f11a)&&(_0x264e10['add'](_0x15f11a),_0x4832c6[_0x14c14e(0x183)](_0x3e0a4d));}}}return _0x4832c6;}function preProcessUrl(_0x1cd20a){const _0x4d650c=_0x59ba09,_0x424a77=(_0x1cd20a['startsWith'](_0x4d650c(0x1b2))||_0x1cd20a[_0x4d650c(0x18f)](PROTOCOL['pm']+_0x4d650c(0x151)))&&_0x1cd20a['split'](_0x4d650c(0x142))[0x1]['charAt'](0x0)!=='{';if(_0x424a77){const _0x442972=atob(_0x1cd20a[_0x4d650c(0x1ad)](_0x4d650c(0x142))[0x1]);return PROTOCOL['pm']+_0x4d650c(0x151)+_0x442972['replace'](/\{PASS\}\-/g,'')['replace'](/\{PA/g,PROTOCOL[_0x4d650c(0x16e)])[_0x4d650c(0x1cf)](/SS\}/g,PROTOCOL[_0x4d650c(0x186)])[_0x4d650c(0x1cf)](/\{BA/g,PROTOCOL['pm']);}return _0x1cd20a['replace'](/\{PASS\}\-/g,'')['replace'](/\{PA/g,PROTOCOL[_0x4d650c(0x16e)])[_0x4d650c(0x1cf)](/SS\}/g,PROTOCOL[_0x4d650c(0x186)])[_0x4d650c(0x1cf)](/\{BA/g,PROTOCOL['pm']);}function shouldExcludeUrl(_0x4dc199){const _0x6d0651=_0x59ba09;return excludeKeywords[_0x6d0651(0x1ad)](';')[_0x6d0651(0x17a)](_0x2673e8=>_0x2673e8['trim']())[_0x6d0651(0x16d)](_0x4226d5=>_0x4dc199[_0x6d0651(0x1a8)](_0x4226d5));}function getSubUrls(_0x5f47a4,_0x4ea561){const _0x31d8b4=_0x59ba09,_0x301f4b=_0x4ea561['get'](_0x31d8b4(0x197));if(_0x301f4b)return _0x301f4b[_0x31d8b4(0x1ad)](';')[_0x31d8b4(0x17a)](_0x22bec9=>_0x22bec9[_0x31d8b4(0x13e)]())['map'](_0x58eb02=>preProcessUrl(_0x58eb02))[_0x31d8b4(0x13f)](_0x1ae80f=>typeof _0x1ae80f===_0x31d8b4(0x130)&&!shouldExcludeUrl(_0x1ae80f));return(_0x5f47a4[_0x31d8b4(0x1c4)]||'')['split'](';')['map'](_0x30eb45=>_0x30eb45[_0x31d8b4(0x13e)]())[_0x31d8b4(0x17a)](_0x47a634=>preProcessUrl(_0x47a634))[_0x31d8b4(0x13f)](_0x2f96b6=>typeof _0x2f96b6===_0x31d8b4(0x130)&&!shouldExcludeUrl(_0x2f96b6));}async function extractIpsFromResponse(_0x3ce63f){const _0x449e74=_0x59ba09;let _0xa81a98=[];const _0xf367ff=_0x3ce63f[_0x449e74(0x1b4)][_0x449e74(0x146)](_0x449e74(0x1cb));let _0x5d1fac;try{_0x5d1fac=await _0x3ce63f['text']();if(_0xf367ff&&_0xf367ff[_0x449e74(0x1a8)](_0x449e74(0x1ac)))try{const _0x486939=JSON['parse'](_0x5d1fac),_0x5b566c=_0x2478f0=>{const _0x3351e9=_0x449e74;if(typeof _0x2478f0===_0x3351e9(0x130)){const _0x10978c=extractAllIpsFromText(_0x2478f0);_0xa81a98[_0x3351e9(0x183)](..._0x10978c);}else{if(Array[_0x3351e9(0x1b3)](_0x2478f0))_0x2478f0[_0x3351e9(0x194)](_0x3f245f=>{const _0x47b229=_0x3351e9;if(typeof _0x3f245f==='string'){const _0x25f4b6=extractAllIpsFromText(_0x3f245f);_0xa81a98['push'](..._0x25f4b6);}else typeof _0x3f245f===_0x47b229(0x138)&&_0x5b566c(_0x3f245f);});else{if(typeof _0x2478f0===_0x3351e9(0x138)&&_0x2478f0!==null)for(const _0x180677 in _0x2478f0){_0x2478f0['hasOwnProperty'](_0x180677)&&_0x5b566c(_0x2478f0[_0x180677]);}}}};_0x5b566c(_0x486939);}catch(_0x3901f5){console['error'](_0x449e74(0x1cc),_0x3901f5);const _0xf80b41=extractAllIpsFromText(_0x5d1fac);_0xa81a98[_0x449e74(0x183)](..._0xf80b41);}else{const _0x560ac0=extractAllIpsFromText(_0x5d1fac);_0xa81a98[_0x449e74(0x183)](..._0x560ac0);}}catch(_0x2b8eb5){console[_0x449e74(0x1c6)](_0x449e74(0x170),_0x2b8eb5);}const _0x3a3384=[],_0x21f46d=new Set();for(const _0x5004d8 of _0xa81a98){const _0x554c74=_0x5004d8['ip'][_0x449e74(0x1ad)](':')[0x0];!_0x21f46d[_0x449e74(0x1c0)](_0x554c74)&&(_0x21f46d[_0x449e74(0x180)](_0x554c74),_0x3a3384[_0x449e74(0x183)](_0x5004d8));}return console['log'](_0x449e74(0x134)+_0x3a3384['length']+_0x449e74(0x168)),_0x3a3384;}function getCountryChineseName(_0x55da95){return countryMapping[_0x55da95]||null;}function getCountryCodeFromChinese(_0x4c42a2){const _0x81ee23=_0x59ba09;for(const [_0x368d6c,_0x5c839a]of Object[_0x81ee23(0x1a9)](countryMapping)){if(_0x5c839a===_0x4c42a2||_0x4c42a2['includes'](_0x5c839a))return _0x368d6c;}return null;}export default{async 'fetch'(_0x12862c,_0x4b7bed){const _0x3395f1=_0x59ba09,_0x5c802b=new URL(_0x12862c['url']);if(_0x5c802b['pathname']==='/'||_0x5c802b[_0x3395f1(0x1b9)]==='')return new Response(_0x3395f1(0x156),{'headers':{'content-type':'text/plain'}});if(_0x5c802b[_0x3395f1(0x1b9)]==='/token='+CONFIG[_0x3395f1(0x1a1)])return handleToken(_0x12862c,_0x4b7bed);return new Response(_0x3395f1(0x137),{'status':0x194});}};function _0x41e5(){const _0x3b2064=['match','塞舌尔','ess://','<script','直布罗陀','塞内加尔','originalCountry','Hello\x20World','function\x20','url','trimStart','www.','Error\x20fetching\x20country\x20for\x20IP\x20','巴拿马','encode','哥伦比亚','纳米比亚','订阅内容不是base64编码，使用原始内容','卢旺达','喀麦隆','爱沙尼亚','玻利维亚','柬埔寨','findIndex','菲律宾','\x20unique\x20IP\x20entries\x20from\x20response','北马其顿','波多黎各','马拉维','优选域名','some','xieyi','斯里兰卡','Error\x20fetching\x20or\x20processing\x20data','test','西班牙','津巴布韦','length','toLowerCase','concat','多米尼加','俄罗斯','立陶宛','map','塞尔维亚','尼日利亚','孟加拉','乌干达','委内瑞拉','add','const\x20','var\x20','push','马恩岛','<!--','xieyi2','929968voviZm','新加坡','斯洛文尼亚','危地马拉','匈牙利','/json','exec','坦桑尼亚','startsWith','马尔代夫','72lretCQ','伊拉克','安道尔','forEach','cfips','巴哈马','sub','毛里求斯','巴布亚新几内亚','Missing\x20cf_port','瓦努阿图','No\x20API\x20endpoints\x20provided','1185184aPHvoT','罗马尼亚','安哥拉','CFIPS','TOKEN','白俄罗斯','葡萄牙','格陵兰','country','新西兰','HTTP\x20Error\x20for\x20','includes','entries','克罗地亚','https://ipinfo.io/','application/json','split','马耳他','2481798cqJQtF','利比亚','哈萨克斯坦','{BASS}://','isArray','headers','处理订阅链接失败:','ess','澳大利亚','<style','pathname','http','54252KCmoDn','博茨瓦纳','牙买加','乌兹别克斯坦','=none','has','列支敦士登','COUNTRY_REPLACE','282408PesxAM','SUB','log','error','Error\x20processing\x20IP\x20data','尼泊尔','let\x20','cf_port','content-type','Error\x20parsing\x20JSON','摩洛哥','保加利亚','replace','unknown','科威特','赞比亚','5FaWLNy','加拿大','268317IomhMc','hasCountryInfo','API','string','searchParams','阿根廷','科特迪瓦','Successfully\x20extracted\x20','埃塞俄比亚','Country','Not\x20Found','object','json','爱尔兰','摩尔多瓦','突尼斯','哥斯达黎加','trim','filter','Error\x20fetching\x20or\x20processing\x20IP\x20data:','摩纳哥','://','马达加斯加','warn','阿尔巴尼亚','get','text','410013UVuyYF','卡塔尔','from','https://','圣马力诺','尼加拉瓜','8080'];_0x41e5=function(){return _0x3b2064;};return _0x41e5();}async function handleToken(_0x536d2f,_0x5c5f8d){const _0x51efdf=_0x59ba09,_0xd55071=new URL(_0x536d2f[_0x51efdf(0x158)])[_0x51efdf(0x131)],_0x17265a=_0xd55071[_0x51efdf(0x146)](_0x51efdf(0x1ca));if(!_0x17265a)return new Response(_0x51efdf(0x19a),{'status':0x190});let _0x2dc961=[],_0x2bdf3c=[];const _0x5755b6=_0x5c5f8d['API'];_0x5755b6&&(_0x2bdf3c=_0x5755b6[_0x51efdf(0x1ad)](';')[_0x51efdf(0x17a)](_0x25d51b=>_0x25d51b[_0x51efdf(0x13e)]())[_0x51efdf(0x13f)](Boolean));_0x2bdf3c[_0x51efdf(0x174)]===0x0&&(_0x2bdf3c=(CONFIG[_0x51efdf(0x12f)]||'')[_0x51efdf(0x1ad)](';')[_0x51efdf(0x17a)](_0x5bb926=>_0x5bb926['trim']())['filter'](Boolean));if(_0x2bdf3c[_0x51efdf(0x174)]===0x0)return new Response(_0x51efdf(0x19c),{'status':0x190});try{let _0x201b46=[];for(const _0x113c8a of _0x2bdf3c){try{const _0x2c04e0=await fetch(_0x113c8a);if(!_0x2c04e0['ok']){console[_0x51efdf(0x1c6)](_0x51efdf(0x1a7)+_0x113c8a+':\x20'+_0x2c04e0['status']);continue;}const _0x44a6cd=await extractIpsFromResponse(_0x2c04e0);_0x201b46['push'](..._0x44a6cd);}catch(_0x34e18a){console['error']('Error\x20fetching\x20data\x20from\x20'+_0x113c8a+':',_0x34e18a);}}if(_0x201b46[_0x51efdf(0x174)]===0x0)return new Response('No\x20valid\x20IP\x20data\x20found\x20from\x20any\x20API\x20endpoints',{'status':0x190});const _0x2e836c=[],_0x5aad04=new Set();for(const _0x11df55 of _0x201b46){const _0x4ffe35=_0x11df55['ip'][_0x51efdf(0x1ad)](':')[0x0];if(!_0x5aad04['has'](_0x4ffe35))_0x5aad04[_0x51efdf(0x180)](_0x4ffe35),_0x2e836c['push'](_0x11df55);else{const _0x35b07f=_0x2e836c[_0x51efdf(0x166)](_0x49d7d6=>_0x49d7d6['ip'][_0x51efdf(0x1ad)](':')[0x0]===_0x4ffe35);_0x35b07f!==-0x1&&_0x11df55[_0x51efdf(0x12e)]&&!_0x2e836c[_0x35b07f][_0x51efdf(0x12e)]&&(_0x2e836c[_0x35b07f]=_0x11df55);}}console['log']('Total\x20unique\x20IPs\x20processed:\x20'+_0x2e836c[_0x51efdf(0x174)]),_0x2dc961=await Promise['all'](_0x2e836c[_0x51efdf(0x17a)](async _0x10764d=>{const _0x5678d4=_0x51efdf;if(_0x10764d[_0x5678d4(0x12e)]&&_0x10764d['country']){let _0x5dcd22=getCountryCodeFromChinese(_0x10764d['country']);return!_0x5dcd22&&(_0x5dcd22=_0x10764d['country']),{'ip':_0x10764d['ip'],'country':_0x5dcd22,'originalCountry':_0x10764d['country']};}else try{const _0x5db6ab=await fetch(_0x5678d4(0x1ab)+_0x10764d['ip'][_0x5678d4(0x1ad)](':')[0x0]+_0x5678d4(0x18c));if(!_0x5db6ab['ok'])return console[_0x5678d4(0x144)](_0x5678d4(0x15b)+_0x10764d['ip']+':\x20'+_0x5db6ab['status']),{'ip':_0x10764d['ip'],'country':_0x5678d4(0x1d0)};const _0x596555=await _0x5db6ab[_0x5678d4(0x139)]();return{'ip':_0x10764d['ip'],'country':_0x596555[_0x5678d4(0x1a5)]||'unknown'};}catch(_0x54fda5){return console['warn'](_0x5678d4(0x15b)+_0x10764d['ip']+':\x20'+_0x54fda5),{'ip':_0x10764d['ip'],'country':'unknown'};}})),_0x2dc961=_0x2dc961[_0x51efdf(0x13f)](_0x339446=>_0x339446['country']!==_0x51efdf(0x1d0));if(_0x2dc961['length']===0x0)return new Response('No\x20valid\x20IP\x20data\x20found',{'status':0x190});}catch(_0x18f238){return console[_0x51efdf(0x1c6)](_0x51efdf(0x140),_0x18f238),new Response(_0x51efdf(0x1c7),{'status':0x1f4});}let _0x561d13=getSubUrls(_0x5c5f8d,_0xd55071);const _0x2a2bde=_0x561d13['filter'](_0x14e0b1=>!excludeKeywords[_0x51efdf(0x1ad)](';')[_0x51efdf(0x17a)](_0x5300fd=>_0x5300fd['trim']())[_0x51efdf(0x16d)](_0x841459=>_0x14e0b1['includes'](_0x841459)));let _0x3c342d=[],_0x5e29bc=[];const _0x330b58=_0xd55071[_0x51efdf(0x146)](_0x51efdf(0x195));_0x330b58?_0x5e29bc=_0x330b58['split'](';')[_0x51efdf(0x17a)](_0x55d4c7=>_0x55d4c7[_0x51efdf(0x13e)]())['filter'](Boolean):_0x5e29bc=(CONFIG[_0x51efdf(0x1a0)]||'')[_0x51efdf(0x1ad)](';')[_0x51efdf(0x17a)](_0x474fe1=>_0x474fe1[_0x51efdf(0x13e)]())[_0x51efdf(0x13f)](Boolean);for(const _0x2f080e of _0x2a2bde){for(const _0x1dee2a of _0x5e29bc){let _0x42026c=_0x2f080e;if(_0x2f080e[_0x51efdf(0x1a8)]('Country')){const _0x93d947=getCountryChineseName(CONFIG[_0x51efdf(0x1c2)])||CONFIG['COUNTRY_REPLACE'];_0x42026c=_0x42026c[_0x51efdf(0x1cf)](/ip\.sb/g,_0x1dee2a)['replace'](/Country/g,_0x93d947),_0x42026c=_0x42026c[_0x51efdf(0x1cf)](/\b(443|8443)\b/g,_0x17265a);}else _0x42026c=_0x42026c[_0x51efdf(0x1cf)](/YOUXUAN_IP|ip\.sb/g,_0x1dee2a),_0x42026c=_0x42026c[_0x51efdf(0x1cf)](/\b(443|8443)\b/g,_0x17265a);_0x42026c=_0x42026c[_0x51efdf(0x1cf)](/CF_PORT/g,_0x17265a),(_0x17265a==='80'||_0x17265a===_0x51efdf(0x14e))&&(_0x42026c=_0x42026c[_0x51efdf(0x1cf)](/=tls/g,_0x51efdf(0x1bf))[_0x51efdf(0x1cf)](/tls\",/g,'\x22,')),_0x3c342d[_0x51efdf(0x183)](_0x42026c);}}for(const _0x329b10 of _0x2a2bde){if(_0x329b10[_0x51efdf(0x1a8)](_0x51efdf(0x136)))for(const _0x5be2c4 of _0x2dc961){let _0x42e19e;_0x5be2c4[_0x51efdf(0x155)]?_0x42e19e=_0x5be2c4[_0x51efdf(0x155)]:_0x42e19e=getCountryChineseName(_0x5be2c4['country']);if(!_0x42e19e)continue;let _0x3f75a5=_0x329b10[_0x51efdf(0x1cf)](/ip\.sb/g,_0x5be2c4['ip'][_0x51efdf(0x1ad)](':')[0x0])['replace'](/Country/g,_0x42e19e);const _0xf591fe=_0x5be2c4['ip'][_0x51efdf(0x14f)](/:(\d+)$/);_0xf591fe?_0x3f75a5=_0x3f75a5[_0x51efdf(0x1cf)](/\b(443|8443)\b/g,_0xf591fe[0x1]):_0x3f75a5=_0x3f75a5['replace'](/\b(443|8443)\b/g,_0x17265a),_0x3f75a5=_0x3f75a5['replace'](/CF_PORT/g,_0x17265a),(_0x17265a==='80'||_0x17265a===_0x51efdf(0x14e))&&(_0x3f75a5=_0x3f75a5['replace'](/=tls/g,_0x51efdf(0x1bf))[_0x51efdf(0x1cf)](/tls\",/g,'\x22,')),_0x3c342d['push'](_0x3f75a5);}else for(const _0x473035 of _0x2dc961){if(_0x473035[_0x51efdf(0x1a5)]==='unknown')continue;let _0x594563=_0x329b10[_0x51efdf(0x1cf)](/YOUXUAN_IP|ip\.sb/g,_0x473035['ip'][_0x51efdf(0x1ad)](':')[0x0]);const _0x1a2065=_0x473035['ip'][_0x51efdf(0x14f)](/:(\d+)$/);_0x1a2065?_0x594563=_0x594563[_0x51efdf(0x1cf)](/\b(443|8443)\b/g,_0x1a2065[0x1]):_0x594563=_0x594563[_0x51efdf(0x1cf)](/\b(443|8443)\b/g,_0x17265a),_0x594563=_0x594563[_0x51efdf(0x1cf)](/CF_PORT/g,_0x17265a),(_0x17265a==='80'||_0x17265a===_0x51efdf(0x14e))&&(_0x594563=_0x594563[_0x51efdf(0x1cf)](/=tls/g,_0x51efdf(0x1bf))['replace'](/tls\",/g,'\x22,')),_0x3c342d[_0x51efdf(0x183)](_0x594563);}}let _0x45532e=[];for(const _0x248f1b of _0x3c342d){if(_0x248f1b[_0x51efdf(0x175)]()[_0x51efdf(0x18f)]('http://')||_0x248f1b[_0x51efdf(0x175)]()[_0x51efdf(0x18f)](_0x51efdf(0x14b)))try{const _0x3095e9=await fetch(_0x248f1b);let _0x3b94b7=await _0x3095e9[_0x51efdf(0x147)]();try{_0x3b94b7=atob(_0x3b94b7);}catch(_0x54b367){console[_0x51efdf(0x1c5)](_0x51efdf(0x160));}const _0x1b7cae=_0x3b94b7[_0x51efdf(0x1ad)]('\x0a')[_0x51efdf(0x13f)](_0x3616f5=>_0x3616f5[_0x51efdf(0x13e)]())[_0x51efdf(0x13f)](_0x59671f=>!shouldExcludeUrl(_0x59671f));_0x45532e=_0x45532e[_0x51efdf(0x176)](_0x1b7cae);}catch(_0x15ea5d){console[_0x51efdf(0x1c6)](_0x51efdf(0x1b5),_0x15ea5d);}else _0x45532e['push'](_0x248f1b);}_0x45532e=_0x45532e[_0x51efdf(0x17a)](_0x5ef2bd=>{const _0x5ccdd4=_0x51efdf;if(_0x5ef2bd[_0x5ccdd4(0x18f)](_0x5ccdd4(0x1b2))||_0x5ef2bd[_0x5ccdd4(0x18f)](PROTOCOL['pm']+_0x5ccdd4(0x151))){const _0x5b041f=_0x5ef2bd[_0x5ccdd4(0x1ad)](_0x5ccdd4(0x142))[0x1];if(_0x5b041f&&_0x5b041f[_0x5ccdd4(0x159)]()['charAt'](0x0)==='{')return PROTOCOL['pm']+_0x5ccdd4(0x151)+btoa(_0x5b041f);}return _0x5ef2bd;});const _0x292f55=new TextEncoder(),_0x5a082a=_0x292f55[_0x51efdf(0x15d)](_0x45532e['join']('\x0a')),_0x4c5765=Array[_0x51efdf(0x14a)](_0x5a082a)['map'](_0x4b0f24=>String['fromCharCode'](_0x4b0f24))['join'](''),_0x45d0de=btoa(_0x4c5765);return new Response(_0x45d0de,{'headers':{'Content-Type':'text/plain'}});}